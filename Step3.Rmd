---
title: "Step3_test"
author: "Annie Kellner"
date: "2023-02-07"
output: html_document
---

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. 

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE) # 'echo' means R will print the code along with the results. 

rm(list = ls()) # clear workspace

library(terra)
library(sf)
library(dplyr)
library(tmap)
library(tmaptools)
library(stringr)
library(data.table)
library(tidyr)

source('./Misc/character_vectors.R')

```

# User settings - choose model, scenarios, years of interest

See options for each selection by entering the object name into the console below. For example, you can type "models" into the console to see which models are available. You can also run any code inside backticks directly from this window. For example, see what happens when you highlight `models` and run the code. You can run code by pressing *Ctrl + Enter* or clicking the 'Run' button in the upper right of this window.


```{r user-settings}
model <- models[2] # Enter the number in the 'models' vector corresponding with your model of interest. For example, LOCA_CCSM4 would be 2.

AFB_Name <- "Homestead_ARB" # Will create a vector similar to models above

## Years of interest

historical_start_year <- 1976 # Start year of interest for the historical time period  
historical_end_year <- 2005 # End year of interest for the historical time period

future1_start_year <- 2026 # Start year of interest for the first future time period 
future1_end_year <- 2035 # End year of interest for the first future time period 

future2_start_year <- 2046 # Start year of interest for the second future time period 
future2_end_year <- 2055 # End year of interest for the second future time period 

## Variables of interest

variable_of_interest <- "tasmax" # I have ideas about how to handle this so the variable(s) can be selected rather than manually entered
```


```{r directories, echo=FALSE}

dir_netcdfs = paste("N:\\RStor\\mindyc\\afccm\\Climate Modeling\\Data\\", model)

# The last two are straight from the original script. Will change so that directories can be set more generally in 'settings'
dir_output_csvs = "N:\\RStor\\mindyc\\afccm\\Climate Modeling\\Results_LOCA_V2" # output csv
dir_functions = "N:\\RStor\\mindyc\\afccm\\Climate Modeling\\Software Apps\\R scripts\\LOCA_V2" # scripts that call in functions for analysis

```

```{r create-array}

# Not sure if this only applies to LOCA, as comment implies. Can cross that bridge when we come to it. 

scenario_yr_array = array(1:15, dim=c(5,3))

### LOCA only arrays
scenario_yr_array[1,1:3] = c("historical", historical_start_year, historical_end_year)
scenario_yr_array[2,1:3] = c("rcp45", future1_start_year, future1_end_year)
scenario_yr_array[3,1:3] = c("rcp45", future2_start_year, future2_end_year)
scenario_yr_array[4,1:3] = c("rcp85", future1_start_year, future1_end_year)
scenario_yr_array[5,1:3] = c("rcp85", future2_start_year, future2_end_year)

```



```{r load-data}

fileNames <- list.files(dir_netcdfs, pattern = '.nc', full.names = TRUE, recursive = TRUE)

hist_filenames_tmax <- fileNames %>% # this will have to be changed to make it more 'universal'. I have ideas but this works for the trial run for now. 
  str_subset("historical") %>% # time period of interest
  str_subset("tasmax")  # variable of interest


```

